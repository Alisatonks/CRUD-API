(()=>{var e={998:(e,t,s)=>{const n=s(896),r=s(928),o=s(857),a=s(982),i=s(56).version,c=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function d(e){console.log(`[dotenv@${i}][DEBUG] ${e}`)}function l(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function u(e,t){let s;try{s=new URL(t)}catch(e){if("ERR_INVALID_URL"===e.code){const e=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw e.code="INVALID_DOTENV_KEY",e}throw e}const n=s.password;if(!n){const e=new Error("INVALID_DOTENV_KEY: Missing key part");throw e.code="INVALID_DOTENV_KEY",e}const r=s.searchParams.get("environment");if(!r){const e=new Error("INVALID_DOTENV_KEY: Missing environment part");throw e.code="INVALID_DOTENV_KEY",e}const o=`DOTENV_VAULT_${r.toUpperCase()}`,a=e.parsed[o];if(!a){const e=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${o} in your .env.vault file.`);throw e.code="NOT_FOUND_DOTENV_ENVIRONMENT",e}return{ciphertext:a,key:n}}function p(e){let t=null;if(e&&e.path&&e.path.length>0)if(Array.isArray(e.path))for(const s of e.path)n.existsSync(s)&&(t=s.endsWith(".vault")?s:`${s}.vault`);else t=e.path.endsWith(".vault")?e.path:`${e.path}.vault`;else t=r.resolve(process.cwd(),".env.vault");return n.existsSync(t)?t:null}function f(e){return"~"===e[0]?r.join(o.homedir(),e.slice(1)):e}const _={configDotenv:function(e){const t=r.resolve(process.cwd(),".env");let s="utf8";const o=Boolean(e&&e.debug);e&&e.encoding?s=e.encoding:o&&d("No encoding is specified. UTF-8 is used by default");let a,i=[t];if(e&&e.path)if(Array.isArray(e.path)){i=[];for(const t of e.path)i.push(f(t))}else i=[f(e.path)];const c={};for(const t of i)try{const r=_.parse(n.readFileSync(t,{encoding:s}));_.populate(c,r,e)}catch(e){o&&d(`Failed to load ${t} ${e.message}`),a=e}let l=process.env;return e&&null!=e.processEnv&&(l=e.processEnv),_.populate(l,c,e),a?{parsed:c,error:a}:{parsed:c}},_configVault:function(e){console.log(`[dotenv@${i}][INFO] Loading env from encrypted .env.vault`);const t=_._parseVault(e);let s=process.env;return e&&null!=e.processEnv&&(s=e.processEnv),_.populate(s,t,e),{parsed:t}},_parseVault:function(e){const t=p(e),s=_.configDotenv({path:t});if(!s.parsed){const e=new Error(`MISSING_DATA: Cannot parse ${t} for an unknown reason`);throw e.code="MISSING_DATA",e}const n=l(e).split(","),r=n.length;let o;for(let e=0;e<r;e++)try{const t=u(s,n[e].trim());o=_.decrypt(t.ciphertext,t.key);break}catch(t){if(e+1>=r)throw t}return _.parse(o)},config:function(e){if(0===l(e).length)return _.configDotenv(e);const t=p(e);return t?_._configVault(e):(s=`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`,console.log(`[dotenv@${i}][WARN] ${s}`),_.configDotenv(e));var s},decrypt:function(e,t){const s=Buffer.from(t.slice(-64),"hex");let n=Buffer.from(e,"base64");const r=n.subarray(0,12),o=n.subarray(-16);n=n.subarray(12,-16);try{const e=a.createDecipheriv("aes-256-gcm",s,r);return e.setAuthTag(o),`${e.update(n)}${e.final()}`}catch(e){const t=e instanceof RangeError,s="Invalid key length"===e.message,n="Unsupported state or unable to authenticate data"===e.message;if(t||s){const e=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw e.code="INVALID_DOTENV_KEY",e}if(n){const e=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw e.code="DECRYPTION_FAILED",e}throw e}},parse:function(e){const t={};let s,n=e.toString();for(n=n.replace(/\r\n?/gm,"\n");null!=(s=c.exec(n));){const e=s[1];let n=s[2]||"";n=n.trim();const r=n[0];n=n.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===r&&(n=n.replace(/\\n/g,"\n"),n=n.replace(/\\r/g,"\r")),t[e]=n}return t},populate:function(e,t,s={}){const n=Boolean(s&&s.debug),r=Boolean(s&&s.override);if("object"!=typeof t){const e=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw e.code="OBJECT_REQUIRED",e}for(const s of Object.keys(t))Object.prototype.hasOwnProperty.call(e,s)?(!0===r&&(e[s]=t[s]),n&&d(!0===r?`"${s}" is already defined and WAS overwritten`:`"${s}" is already defined and was NOT overwritten`)):e[s]=t[s]}};e.exports.configDotenv=_.configDotenv,e.exports._configVault=_._configVault,e.exports._parseVault=_._parseVault,e.exports.config=_.config,e.exports.decrypt=_.decrypt,e.exports.parse=_.parse,e.exports.populate=_.populate,e.exports=_},230:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(520)),o=n(s(161)),a=n(s(997)),i=n(s(998)),c=n(s(67)),d=s(267);t.default=()=>{i.default.config();const e=parseInt(process.env.PORT||"4000",10);if(r.default.isPrimary){const t=o.default.cpus().length-1;r.default.on("message",((e,t)=>{if("UPDATE_USERS"===t.type){(0,d.changeUsers)(t.data);for(const e in r.default.workers)r.default.workers[e]?.send({type:"SYNC_USERS",data:t.data})}}));for(let s=0;s<t;s++)r.default.fork({WORKER_PORT:e+s+1});console.log(`Primary process ${process.pid} is running and listening for requests on port ${e}`);const s=(()=>{let s=0;const n=Array.from({length:t},((t,s)=>e+s+1));return()=>n[s++%n.length]})();c.default.createServer(((e,t)=>{const n={hostname:"localhost",port:s(),path:e.url,method:e.method,headers:e.headers},r=c.default.request(n,(e=>{t.writeHead(e.statusCode||500,e.headers),e.pipe(t,{end:!0})}));e.pipe(r,{end:!0})})).listen(e)}else{const e=process.env.WORKER_PORT;e?((0,a.default)(e),process.on("message",(e=>{"SYNC_USERS"===e.type&&(0,d.changeUsers)(e.data)})),console.log(`Worker process PID: ${process.pid} running on http://localhost:${e}`)):(console.error("WORKER_PORT is not defined"),process.exit(1))}}},267:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteUser=t.updateUser=t.findUserIndex=t.createNewUser=t.validateUser=t.changeUsers=t.users=void 0;const r=n(s(598));t.users=[],t.changeUsers=e=>{t.users=[...e]},t.validateUser=e=>{const{username:t,age:s,hobbies:n}=e;return"string"==typeof t&&"number"==typeof s&&Array.isArray(n)},t.createNewUser=e=>{const s={id:r.default.randomUUID(),...e};return t.users.push(s),process.send&&process.send({type:"UPDATE_USERS",data:t.users}),s},t.findUserIndex=e=>t.users.findIndex((t=>t.id===e)),t.updateUser=(e,s,n)=>{const r={id:s,...e};return t.users[n]={...t.users[n],id:s,...e},process.send&&process.send({type:"UPDATE_USERS",data:t.users}),r},t.deleteUser=e=>{t.users.splice(e,1),process.send&&process.send({type:"UPDATE_USERS",data:t.users})}},156:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(997)),o=n(s(998)),a=n(s(230));o.default.config();const i=process.argv.slice(2)[0];i&&i.includes("multi")?(0,a.default)():(0,r.default)(process.env.PORT||4e3)},174:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(656)),o=n(s(19)),a=s(267),i=s(139);t.default=(e,t)=>{const{baseUrl:s,id:n}=(0,r.default)(e.url||"");if("/api/users"===s)if(n)if((0,o.default)(n)){if((0,o.default)(n)){const e=(0,a.findUserIndex)(n);-1===e?(t.statusCode=404,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:i.NOT_FOUND,message:i.USER_NOT_FOUND}))):(process.send&&process.send({type:"DELETE_USER",userId:n}),(0,a.deleteUser)(e),process.send&&process.send({type:"delete",id:n}),t.writeHead(204,{"Content-Type":"application/json"}),t.end())}}else t.statusCode=400,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:i.VALIDATION_ERROR,message:i.ID_NOT_VALID}));else t.statusCode=400,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:"Error",message:i.USER_ID_MISSING}));else t.statusCode=404,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:i.NOT_FOUND,message:i.ROUTE_NOT_FOUND}))}},981:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(656)),o=n(s(19)),a=s(139);t.default=(e,t)=>{const{baseUrl:s,id:n}=(0,r.default)(e.url||"");if("/api/users"===s)if(n)if((0,o.default)(n)){if((0,o.default)(n)){const s=e.users?.filter((e=>e.id===n));s&&s.length>0?(t.statusCode=200,t.setHeader("Content-Type","application/json"),t.write(JSON.stringify(s[0])),t.end()):(t.statusCode=404,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:a.NOT_FOUND,message:a.USER_NOT_FOUND})))}}else t.statusCode=400,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:a.VALIDATION_ERROR,message:a.ID_NOT_VALID}));else t.statusCode=200,t.setHeader("Content-Type","application/json"),t.write(JSON.stringify(e.users)),t.end();else t.statusCode=404,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:a.NOT_FOUND,message:a.ROUTE_NOT_FOUND}))}},867:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(139),o=n(s(339)),a=s(267),i=n(s(656));t.default=async(e,t)=>{const{baseUrl:s}=(0,i.default)(e.url||"");if("/api/users"===s)try{const s=await(0,o.default)(e);if(!(0,a.validateUser)(s))return t.statusCode=400,t.setHeader("Content-Type","application/json"),void t.end(JSON.stringify({title:r.VALIDATION_ERROR,message:r.BODY_NOT_VALID}));const n=(0,a.createNewUser)(s);t.statusCode=201,t.setHeader("Content-Type","application/json"),t.write(JSON.stringify(n)),t.end()}catch(e){console.error(e),t.statusCode=400,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:r.VALIDATION_ERROR,message:r.BODY_NOT_VALID}))}else t.statusCode=404,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:r.NOT_FOUND,message:r.ROUTE_NOT_FOUND}))}},676:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(339)),o=s(267),a=s(139),i=n(s(656)),c=n(s(19));t.default=async(e,t)=>{const{baseUrl:s,id:n}=(0,i.default)(e.url||"");if("/api/users"===s)if(n)if((0,c.default)(n)){if((0,c.default)(n)){const s=(0,o.findUserIndex)(n);if(-1===s)t.statusCode=404,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:a.NOT_FOUND,message:a.USER_NOT_FOUND}));else try{const i=await(0,r.default)(e);if(!(0,o.validateUser)(i))return t.statusCode=400,t.setHeader("Content-Type","application/json"),void t.end(JSON.stringify({title:a.VALIDATION_ERROR,message:a.BODY_NOT_VALID}));const c=(0,o.updateUser)(i,n,s);t.statusCode=200,t.setHeader("Content-Type","application/json"),t.write(JSON.stringify(c)),t.end()}catch(e){t.statusCode=500,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:a.SERVER_ERROR,message:a.SERVER_ERROR}))}}}else t.statusCode=400,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:a.VALIDATION_ERROR,message:a.ID_NOT_VALID}));else t.statusCode=400,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:"Error",message:a.USER_ID_MISSING}));else t.statusCode=404,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:a.NOT_FOUND,message:a.ROUTE_NOT_FOUND}))}},997:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(611)),o=n(s(981)),a=n(s(174)),i=n(s(676)),c=n(s(867)),d=s(267),l=s(139);t.default=function(e){return new Promise((async(t,s)=>{try{const n=r.default.createServer(((t,s)=>{t.users=d.users,s.setHeader("X-Worker-Port",e.toString());try{switch(t.method){case"GET":(0,o.default)(t,s);break;case"POST":(0,c.default)(t,s);break;case"PUT":(0,i.default)(t,s);break;case"DELETE":(0,a.default)(t,s);break;default:s.statusCode=404,s.setHeader("Content-Type","application/json"),s.end(JSON.stringify({title:"Not found",message:"Route not found"}))}}catch(e){console.error(l.SERVER_ERROR,e),s.statusCode=500,s.setHeader("Content-Type","application/json"),s.end(JSON.stringify({title:l.SERVER_ERROR,message:l.SERVER_ERROR_MSG}))}}));n.listen(e,(()=>{console.log(`Server started on PORT: ${e}`),t(n)})),n.on("error",(e=>{s(e)}))}catch(e){console.error("Error starting the server:",e),s(e)}}))}},339:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>new Promise(((t,s)=>{let n="";e.on("data",(e=>n+=e)),e.on("end",(()=>{try{const e=JSON.parse(n);t(e)}catch(e){console.error("Error parsing request body:",e),s(e)}})),e.on("error",(e=>{console.error("Request error:",e),s(e)}))}))},19:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},139:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USER_ID_MISSING=t.BODY_NOT_VALID=t.SERVER_ERROR_MSG=t.SERVER_ERROR=t.INVALID_DATA=t.FAIL=t.SUCCESS=t.USER_CREATED=t.USER_NOT_FOUND=t.ROUTE_NOT_FOUND=t.NOT_FOUND=t.ID_NOT_VALID=t.VALIDATION_ERROR=void 0,t.VALIDATION_ERROR="Validation Error",t.ID_NOT_VALID="UUID is not valid",t.NOT_FOUND="Not Found",t.ROUTE_NOT_FOUND="Route not found",t.USER_NOT_FOUND="User is not found",t.USER_CREATED="User created successfully",t.SUCCESS="Successful operation",t.FAIL="Operation failed",t.INVALID_DATA="Invalid JSON data",t.SERVER_ERROR="Server error",t.SERVER_ERROR_MSG="Something went wrong on the server. Please try again later.",t.BODY_NOT_VALID="Request body is not valid",t.USER_ID_MISSING="User ID is missing"},656:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>{const t=(e.endsWith("/")?e.slice(0,-1):e).split("/");return{baseUrl:t.slice(0,3).join("/"),id:t[3]||void 0}}},982:e=>{"use strict";e.exports=require("crypto")},896:e=>{"use strict";e.exports=require("fs")},611:e=>{"use strict";e.exports=require("http")},520:e=>{"use strict";e.exports=require("node:cluster")},598:e=>{"use strict";e.exports=require("node:crypto")},67:e=>{"use strict";e.exports=require("node:http")},161:e=>{"use strict";e.exports=require("node:os")},857:e=>{"use strict";e.exports=require("os")},928:e=>{"use strict";e.exports=require("path")},56:e=>{"use strict";e.exports=JSON.parse('{"name":"dotenv","version":"16.4.5","description":"Loads environment variables from .env file","main":"lib/main.js","types":"lib/main.d.ts","exports":{".":{"types":"./lib/main.d.ts","require":"./lib/main.js","default":"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},"scripts":{"dts-check":"tsc --project tests/types/tsconfig.json","lint":"standard","lint-readme":"standard-markdown","pretest":"npm run lint && npm run dts-check","test":"tap tests/*.js --100 -Rspec","test:coverage":"tap --coverage-report=lcov","prerelease":"npm test","release":"standard-version"},"repository":{"type":"git","url":"git://github.com/motdotla/dotenv.git"},"funding":"https://dotenvx.com","keywords":["dotenv","env",".env","environment","variables","config","settings"],"readmeFilename":"README.md","license":"BSD-2-Clause","devDependencies":{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3","decache":"^4.6.1","sinon":"^14.0.1","standard":"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0","tap":"^16.3.0","tar":"^6.1.11","typescript":"^4.8.4"},"engines":{"node":">=12"},"browser":{"fs":false}}')}},t={};!function s(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,s),o.exports}(156)})();