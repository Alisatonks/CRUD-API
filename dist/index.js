(()=>{var e={998:(e,t,s)=>{const n=s(896),o=s(928),r=s(857),i=s(982),a=s(56).version,l=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function c(e){console.log(`[dotenv@${a}][DEBUG] ${e}`)}function d(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function u(e,t){let s;try{s=new URL(t)}catch(e){if("ERR_INVALID_URL"===e.code){const e=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw e.code="INVALID_DOTENV_KEY",e}throw e}const n=s.password;if(!n){const e=new Error("INVALID_DOTENV_KEY: Missing key part");throw e.code="INVALID_DOTENV_KEY",e}const o=s.searchParams.get("environment");if(!o){const e=new Error("INVALID_DOTENV_KEY: Missing environment part");throw e.code="INVALID_DOTENV_KEY",e}const r=`DOTENV_VAULT_${o.toUpperCase()}`,i=e.parsed[r];if(!i){const e=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${r} in your .env.vault file.`);throw e.code="NOT_FOUND_DOTENV_ENVIRONMENT",e}return{ciphertext:i,key:n}}function p(e){let t=null;if(e&&e.path&&e.path.length>0)if(Array.isArray(e.path))for(const s of e.path)n.existsSync(s)&&(t=s.endsWith(".vault")?s:`${s}.vault`);else t=e.path.endsWith(".vault")?e.path:`${e.path}.vault`;else t=o.resolve(process.cwd(),".env.vault");return n.existsSync(t)?t:null}function f(e){return"~"===e[0]?o.join(r.homedir(),e.slice(1)):e}const _={configDotenv:function(e){const t=o.resolve(process.cwd(),".env");let s="utf8";const r=Boolean(e&&e.debug);e&&e.encoding?s=e.encoding:r&&c("No encoding is specified. UTF-8 is used by default");let i,a=[t];if(e&&e.path)if(Array.isArray(e.path)){a=[];for(const t of e.path)a.push(f(t))}else a=[f(e.path)];const l={};for(const t of a)try{const o=_.parse(n.readFileSync(t,{encoding:s}));_.populate(l,o,e)}catch(e){r&&c(`Failed to load ${t} ${e.message}`),i=e}let d=process.env;return e&&null!=e.processEnv&&(d=e.processEnv),_.populate(d,l,e),i?{parsed:l,error:i}:{parsed:l}},_configVault:function(e){console.log(`[dotenv@${a}][INFO] Loading env from encrypted .env.vault`);const t=_._parseVault(e);let s=process.env;return e&&null!=e.processEnv&&(s=e.processEnv),_.populate(s,t,e),{parsed:t}},_parseVault:function(e){const t=p(e),s=_.configDotenv({path:t});if(!s.parsed){const e=new Error(`MISSING_DATA: Cannot parse ${t} for an unknown reason`);throw e.code="MISSING_DATA",e}const n=d(e).split(","),o=n.length;let r;for(let e=0;e<o;e++)try{const t=u(s,n[e].trim());r=_.decrypt(t.ciphertext,t.key);break}catch(t){if(e+1>=o)throw t}return _.parse(r)},config:function(e){if(0===d(e).length)return _.configDotenv(e);const t=p(e);return t?_._configVault(e):(s=`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`,console.log(`[dotenv@${a}][WARN] ${s}`),_.configDotenv(e));var s},decrypt:function(e,t){const s=Buffer.from(t.slice(-64),"hex");let n=Buffer.from(e,"base64");const o=n.subarray(0,12),r=n.subarray(-16);n=n.subarray(12,-16);try{const e=i.createDecipheriv("aes-256-gcm",s,o);return e.setAuthTag(r),`${e.update(n)}${e.final()}`}catch(e){const t=e instanceof RangeError,s="Invalid key length"===e.message,n="Unsupported state or unable to authenticate data"===e.message;if(t||s){const e=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw e.code="INVALID_DOTENV_KEY",e}if(n){const e=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw e.code="DECRYPTION_FAILED",e}throw e}},parse:function(e){const t={};let s,n=e.toString();for(n=n.replace(/\r\n?/gm,"\n");null!=(s=l.exec(n));){const e=s[1];let n=s[2]||"";n=n.trim();const o=n[0];n=n.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===o&&(n=n.replace(/\\n/g,"\n"),n=n.replace(/\\r/g,"\r")),t[e]=n}return t},populate:function(e,t,s={}){const n=Boolean(s&&s.debug),o=Boolean(s&&s.override);if("object"!=typeof t){const e=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw e.code="OBJECT_REQUIRED",e}for(const s of Object.keys(t))Object.prototype.hasOwnProperty.call(e,s)?(!0===o&&(e[s]=t[s]),n&&c(!0===o?`"${s}" is already defined and WAS overwritten`:`"${s}" is already defined and was NOT overwritten`)):e[s]=t[s]}};e.exports.configDotenv=_.configDotenv,e.exports._configVault=_._configVault,e.exports._parseVault=_._parseVault,e.exports.config=_.config,e.exports.decrypt=_.decrypt,e.exports.parse=_.parse,e.exports.populate=_.populate,e.exports=_},738:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeUsers=t.initialUsers=t.users=void 0,t.users=[],t.initialUsers=[{id:"550e8400-e29b-41d4-a716-446655440000",username:"Alisa Tonks",age:38,hobbies:"Crocheting"},{id:"551e8400-e29b-41d4-a716-446655440000",username:"Volha Haiduk",age:39,hobbies:"Traveling"},{username:"Pavel Haiduk",age:39,hobbies:"Cars",id:"2f14a633-27e3-44c9-a2f0-6a969b9677ec"}],t.initializeUsers=()=>{t.users=t.initialUsers}},156:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),(0,n(s(997)).default)(4e3)},174:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(s(656)),r=n(s(19)),i=s(738),a=s(139);t.default=(e,t)=>{const{baseUrl:s,id:n}=(0,o.default)(e.url||"");if("/api/users"===s)if(n)if((0,r.default)(n)){if((0,r.default)(n)){const e=i.users.findIndex((e=>e.id===n));-1===e?(t.statusCode=404,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:a.NOT_FOUND,message:a.USER_NOT_FOUND}))):(i.users.splice(e,1),t.writeHead(204,{"Content-Type":"application/json"}),t.end())}}else t.statusCode=400,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:a.VALIDATION_ERROR,message:a.ID_NOT_VALID}));else t.statusCode=400,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:"Error",message:a.USER_ID_MISSING}));else t.statusCode=404,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:a.NOT_FOUND,message:a.ROUTE_NOT_FOUND}))}},981:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(s(656)),r=n(s(19)),i=s(139);t.default=(e,t)=>{const{baseUrl:s,id:n}=(0,o.default)(e.url||"");if("/api/users"===s)if(n)if((0,r.default)(n)){if((0,r.default)(n)){const s=e.users?.filter((e=>e.id===n));s&&s.length>0?(t.statusCode=200,t.setHeader("Content-Type","application/json"),t.write(JSON.stringify(s[0])),t.end()):(t.statusCode=404,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:i.NOT_FOUND,message:i.USER_NOT_FOUND})))}}else t.statusCode=400,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:i.VALIDATION_ERROR,message:i.ID_NOT_VALID}));else t.statusCode=200,t.setHeader("Content-Type","application/json"),t.write(JSON.stringify(e.users)),t.end();else t.statusCode=404,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:i.NOT_FOUND,message:i.ROUTE_NOT_FOUND}))}},867:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(s(598)),r=s(139),i=n(s(339)),a=s(738);t.default=async(e,t)=>{if("/api/users"===e.url)try{const s=await(0,i.default)(e);if(!s.username||!s.age||!s.hobbies)return t.statusCode=400,t.setHeader("Content-Type","application/json"),void t.end(JSON.stringify({title:r.VALIDATION_ERROR,message:r.BODY_NOT_VALID}));s.id=o.default.randomUUID();const n=s;a.users.push(n),t.statusCode=201,t.setHeader("Content-Type","application/json"),t.write(JSON.stringify(n)),t.end()}catch(e){console.log(e),t.statusCode=400,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:r.VALIDATION_ERROR,message:r.BODY_NOT_VALID}))}else t.statusCode=404,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:r.NOT_FOUND,message:r.ROUTE_NOT_FOUND}))}},676:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(s(339)),r=s(738),i=s(139),a=n(s(656)),l=n(s(19));t.default=async(e,t)=>{const{baseUrl:s,id:n}=(0,a.default)(e.url||"");if("/api/users"===s)if(n)if((0,l.default)(n)){if((0,l.default)(n)){const s=r.users.findIndex((e=>e.id===n));if(-1===s)t.statusCode=404,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:i.NOT_FOUND,message:i.USER_NOT_FOUND}));else try{const a=await(0,o.default)(e);if(!a.username||!a.age||!a.hobbies)return t.statusCode=400,t.setHeader("Content-Type","application/json"),void t.end(JSON.stringify({title:i.VALIDATION_ERROR,message:i.BODY_NOT_VALID}));r.users[s]={...r.users[s],...a,id:n},t.statusCode=200,t.setHeader("Content-Type","application/json"),t.write(JSON.stringify({id:n,...a})),t.end()}catch(e){t.statusCode=500,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:i.SERVER_ERROR,message:i.SERVER_ERROR}))}}}else t.statusCode=400,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:i.VALIDATION_ERROR,message:i.ID_NOT_VALID}));else t.statusCode=400,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:"Error",message:i.USER_ID_MISSING}));else t.statusCode=404,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:i.NOT_FOUND,message:i.ROUTE_NOT_FOUND}))}},997:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(s(611)),r=n(s(998)),i=n(s(981)),a=n(s(174)),l=n(s(676)),c=n(s(867)),d=s(738),u=s(738),p=s(139);r.default.config(),t.default=function(e){return new Promise((async(t,s)=>{try{(0,d.initializeUsers)();const n=o.default.createServer(((e,t)=>{e.users=u.users;try{switch(e.method){case"GET":(0,i.default)(e,t);break;case"POST":(0,c.default)(e,t);break;case"PUT":(0,l.default)(e,t);break;case"DELETE":(0,a.default)(e,t);break;default:t.statusCode=404,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:"Not found",message:"Route not found"}))}}catch(e){console.error(p.SERVER_ERROR,e),t.statusCode=500,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({title:p.SERVER_ERROR,message:p.SERVER_ERROR_MSG}))}}));n.listen(e,(()=>{console.log(`Server started on PORT: ${e}`),t(n)})),n.on("error",(e=>{s(e)}))}catch(e){console.error("Error starting the server:",e),s(e)}}))}},339:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>new Promise(((t,s)=>{let n="";e.on("data",(e=>n+=e)),e.on("end",(()=>{try{const e=JSON.parse(n);t(e)}catch(e){console.error("Error parsing request body:",e),s(e)}})),e.on("error",(e=>{console.error("Request error:",e),s(e)}))}))},19:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},139:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USER_ID_MISSING=t.BODY_NOT_VALID=t.SERVER_ERROR_MSG=t.SERVER_ERROR=t.INVALID_DATA=t.FAIL=t.SUCCESS=t.USER_CREATED=t.USER_NOT_FOUND=t.ROUTE_NOT_FOUND=t.NOT_FOUND=t.ID_NOT_VALID=t.VALIDATION_ERROR=void 0,t.VALIDATION_ERROR="Validation Error",t.ID_NOT_VALID="UUID is not valid",t.NOT_FOUND="Not Found",t.ROUTE_NOT_FOUND="Route not found",t.USER_NOT_FOUND="User is not found",t.USER_CREATED="User created successfully",t.SUCCESS="Successful operation",t.FAIL="Operation failed",t.INVALID_DATA="Invalid JSON data",t.SERVER_ERROR="Server error",t.SERVER_ERROR_MSG="Something went wrong on the server. Please try again later.",t.BODY_NOT_VALID="Request body is not valid",t.USER_ID_MISSING="User ID is missing"},656:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>{const t=(e.endsWith("/")?e.slice(0,-1):e).split("/");return{baseUrl:t.slice(0,3).join("/"),id:t[3]||void 0}}},982:e=>{"use strict";e.exports=require("crypto")},896:e=>{"use strict";e.exports=require("fs")},611:e=>{"use strict";e.exports=require("http")},598:e=>{"use strict";e.exports=require("node:crypto")},857:e=>{"use strict";e.exports=require("os")},928:e=>{"use strict";e.exports=require("path")},56:e=>{"use strict";e.exports=JSON.parse('{"name":"dotenv","version":"16.4.5","description":"Loads environment variables from .env file","main":"lib/main.js","types":"lib/main.d.ts","exports":{".":{"types":"./lib/main.d.ts","require":"./lib/main.js","default":"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},"scripts":{"dts-check":"tsc --project tests/types/tsconfig.json","lint":"standard","lint-readme":"standard-markdown","pretest":"npm run lint && npm run dts-check","test":"tap tests/*.js --100 -Rspec","test:coverage":"tap --coverage-report=lcov","prerelease":"npm test","release":"standard-version"},"repository":{"type":"git","url":"git://github.com/motdotla/dotenv.git"},"funding":"https://dotenvx.com","keywords":["dotenv","env",".env","environment","variables","config","settings"],"readmeFilename":"README.md","license":"BSD-2-Clause","devDependencies":{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3","decache":"^4.6.1","sinon":"^14.0.1","standard":"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0","tap":"^16.3.0","tar":"^6.1.11","typescript":"^4.8.4"},"engines":{"node":">=12"},"browser":{"fs":false}}')}},t={};!function s(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,s),r.exports}(156)})();